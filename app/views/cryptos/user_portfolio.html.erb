<div class="container">
  <div class="home-title">
    <h4 class="text-center"> My CryptoCurrency Portfolio </h4>
  </div>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <td> Name </td>
          <td class="text-center"> Current Price </td>
          <td class="text-center"> Purchase Price </td>
          <td class="text-center"> Total Owned</td>
          <td class="text-center"> Current Value</td>
          <td class="text-center"> Profit/Loss </td>
          <td></td>
        </tr>
      </thead>
      <% net_worth = 0 %>
      <% profit_loss = 0 %>
    <% @all_cryptos.each_with_index do |data, index| %>
      <% @cryptos.each do |crypto| %>
        <% if crypto.name == data['nome'] %>
        <tbody>
          <tr>
            <td> <%= crypto.name %> </td>
            <td class="text-center"> <%= number_to_currency(data['preco'], precision: 4) %> </td>
            <td class="text-center"> <%= number_to_currency(crypto.price) %> </td>
            <td class="text-center"> <%= (crypto.total) %> </td>
            <td class="text-center"> <%= number_to_currency(crypto.total * data['preco'].to_f) %> </td>
            <td class="text-center"> <%= number_to_currency( (crypto.total * data['preco'].to_f) - (crypto.total * crypto.price) ) %> </td>
            <td class="x-button"> <%= link_to crypto_path(crypto), method: :delete do %> <div class="glyphicon glyphicon-remove" > </div> </td> <% end %>
          </tr>
        </tbody>
        <% profit_loss += ( (crypto.total * data['preco'].to_f) - (crypto.total * crypto.price)  ) %>
        <% net_worth += (crypto.total * data['preco'].to_f) %>
        <% end %>
      <% end %>
    <% end %>
    </table>
    <div class="panel panel-default">
      <div class="panel-body portfolio-numbers">
        <p> Net Worth: <%= number_to_currency(net_worth) %> </p>
        <p> Total profit/loss: <%= number_to_currency(profit_loss) %> </p>
      </div>
    </div>
</div>
